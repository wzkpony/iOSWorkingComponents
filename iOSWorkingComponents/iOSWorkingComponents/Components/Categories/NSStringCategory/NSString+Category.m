//
//  NSString+Category.m
//  IronFish
//
//  Created by wzk on 2018/12/10.
//  Copyright ¬© 2018Âπ¥ wzk. All rights reserved.
//
#import <UIKit/UIKit.h>
#import "NSString+Category.h"
#import <SAMKeychain/SAMKeychain.h>
#import "CustomConst.h"
#import "ColorConfig.h"
#import "JKCategories.h"
#import "FontConfig.h"

static CGFloat const kTextLineSpace = 0;

@implementation NSString (Category)
/**Ëé∑ÂèñÊ±âÂ≠óÁöÑÈ¶ñÂ≠óÊØç*/
+ (NSString *)firstCharactor:(NSString *)aString
{
    NSMutableString *str = [NSMutableString stringWithString:aString];
    
    CFStringTransform((CFMutableStringRef)str,NULL, kCFStringTransformMandarinLatin,NO);
    
    CFStringTransform((CFMutableStringRef)str,NULL, kCFStringTransformStripDiacritics,NO);
    
    NSString *pinYin = [str capitalizedString];
    
    if (pinYin.length>0) {
        pinYin = [pinYin substringToIndex:1];
    }
    
    return pinYin;
}


//Ëé∑ÂèñËÆæÂ§áüëå
+ (NSString *)getDeviceId:(NSString *)kKeychainService kKeychainDeviceId:(NSString *)kKeychainDeviceId {
    // ËØªÂèñËÆæÂ§áÂè∑
    /**
     NSString *kKeychainService = @"com.coscon.COSCOEBProjects";
     NSString *kKeychainDeviceId    = @"KeychainDeviceId";
     */
    
    NSString *localDeviceId = [SAMKeychain passwordForService:kKeychainService account:kKeychainDeviceId];

    if (!localDeviceId) {
        // ‰øùÂ≠òËÆæÂ§áÂè∑
        CFUUIDRef deviceId = CFUUIDCreate(NULL);
        assert(deviceId != NULL);
        CFStringRef deviceIdStr = CFUUIDCreateString(NULL, deviceId);
        [SAMKeychain setPassword:[NSString stringWithFormat:@"%@", deviceIdStr] forService:kKeychainService account:kKeychainDeviceId];
        localDeviceId = [NSString stringWithFormat:@"%@", deviceIdStr];
    }
    return localDeviceId;
}
 


//ËÆ°ÁÆóÂ≠óËäÇÈïøÂ∫¶
- (NSInteger)getToInt
{
    NSInteger strlength = 0;
    char* p = (char*)[self cStringUsingEncoding:NSUnicodeStringEncoding];
    for (int i=0 ; i<[self lengthOfBytesUsingEncoding:NSUnicodeStringEncoding] ;i++) {
        if (*p) {
            p++;
            strlength++;
        }
        else {
            p++;
        }
    }
    return strlength;
    
}
//ÊåâÂ≠óËäÇÊà™ÂèñÂ≠óÁ¨¶‰∏≤
- (NSString *)subStringByByteWithIndex:(NSInteger)index{
    NSString *stringContent = [self mutableCopy];
    NSInteger sum = 0;
    
    NSString *subStr = [[NSString alloc] init];
    
    for(int i = 0; i<[stringContent length]; i++){
        
        unichar strChar = [stringContent characterAtIndex:i];
        
        if(strChar < 256){
            sum += 1;
        }
        else {
            sum += 2;
        }
        if (sum >= index) {
            subStr = [stringContent substringToIndex:i+1];
            
            return subStr;
        }
        
    }
    
    return subStr;
}



+ (NSString *)getDocumentPath{
    NSString *documentPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) firstObject];
    return documentPath;
}

/**ÁîµËØùÂè∑Á†Å‰∏≠Èó¥4‰ΩçÊï∞ËÑ±Êïè*/
+ (NSString *)phoneXingString:(NSString *)phone{
    if (phone && phone.length > 7) {
        phone = [phone stringByReplacingCharactersInRange:NSMakeRange(phone.length -8, 4) withString:@"****"];//Èò≤Ê≠¢Âè∑Á†ÅÊúâÂâçÁºÄÊâÄ‰ª•‰ΩøÁî®ÂÄíÊï∞Á¨¨8‰ΩçÂºÄÂßãÊõøÊç¢
    }
    return phone;
}
/**ËÑ±Êïè*/
+ (NSString *)phoneFirstXingString:(NSString *)string{
    if (string.length > 0) {
        NSString *firstStr = [string substringToIndex:1];
        if ([NSString isChineseFirst:firstStr]) {
            string = [string stringByReplacingCharactersInRange:NSMakeRange(1, string.length-1) withString:@"***"];//
        }
        else if (string.length > 3) {
            
            string = [string stringByReplacingCharactersInRange:NSMakeRange(3, string.length-3) withString:@"***"];//
        }
        else{
            string = [NSString stringWithFormat:@"%@***",string];
        }
    }
   
    return string;
}

/**ÊòØÂê¶‰∏≠ÊñáÂºÄÂ§¥*/
+ (BOOL)isChineseFirst:(NSString *)firstStr
{
    //ÊòØÂê¶‰ª•‰∏≠ÊñáÂºÄÂ§¥(unicode‰∏≠ÊñáÁºñÁ†ÅËåÉÂõ¥ÊòØ0x4e00~0x9fa5)
    int utfCode = 0;
    void *buffer = &utfCode;
    NSRange range = NSMakeRange(0, 1);
    //Âà§Êñ≠ÊòØ‰∏çÊòØ‰∏≠ÊñáÂºÄÂ§¥ÁöÑ,buffer->Ëé∑ÂèñÂ≠óÁ¨¶ÁöÑÂ≠óËäÇÊï∞ÊçÆ maxLength->bufferÁöÑÊúÄÂ§ßÈïøÂ∫¶ usedLength->ÂÆûÈôÖÂÜôÂÖ•ÁöÑÈïøÂ∫¶Ôºå‰∏çÈúÄË¶ÅÁöÑËØùÂèØ‰ª•‰º†ÈÄíNULL encoding->Â≠óÁ¨¶ÁºñÁ†ÅÂ∏∏Êï∞Ôºå‰∏çÂêåÁºñÁ†ÅÊñπÂºèËΩ¨Êç¢ÂêéÁöÑÂ≠óËäÇÈïøÊòØ‰∏ç‰∏ÄÊ†∑ÁöÑÔºåËøôÈáåÊàëÁî®‰∫ÜUTF16 Little-EndianÔºåmaxLength‰∏∫2Â≠óËäÇÔºåÂ¶ÇÊûú‰ΩøÁî®UnicodeÔºåÂàôÈúÄË¶Å4Â≠óËäÇ options->ÁºñÁ†ÅËΩ¨Êç¢ÁöÑÈÄâÈ°πÔºåÊúâ‰∏§‰∏™ÂÄºÔºåÂàÜÂà´ÊòØNSStringEncodingConversionAllowLossyÂíåNSStringEncodingConversionExternalRepresentation range->Ëé∑ÂèñÁöÑÂ≠óÁ¨¶‰∏≤‰∏≠ÁöÑÂ≠óÁ¨¶ËåÉÂõ¥,ËøôÈáåËÆæÁΩÆÁöÑÁ¨¨‰∏Ä‰∏™Â≠óÁ¨¶ remainingRange->Âª∫ËÆÆËé∑ÂèñÁöÑËåÉÂõ¥ÔºåÂèØ‰ª•‰º†ÈÄíNULL
    BOOL b = [firstStr getBytes:buffer maxLength:2 usedLength:NULL encoding:NSUTF16LittleEndianStringEncoding options:NSStringEncodingConversionExternalRepresentation range:range remainingRange:NULL];
    if (b && (utfCode >= 0x4e00 && utfCode <= 0x9fa5))
        return YES;
    else
        return NO;
}



/**Ëé∑ÂèñÁîµËØùÂè∑Á†ÅÂ∞æÂè∑4‰ΩçÊï∞*/
+ (NSString *)phoneLastFourString:(NSString *)phone{
    if (phone && phone.length > 4) {
        phone = [phone substringWithRange:NSMakeRange(phone.length -4, 4)];//Èò≤Ê≠¢Âè∑Á†ÅÊúâÂâçÁºÄÊâÄ‰ª•‰ΩøÁî®ÂÄíÊï∞Á¨¨8‰ΩçÂºÄÂßãÊõøÊç¢
    }
    return phone;
}
/**6Âà∞20‰ΩçÊï∞Â≠óÂíåÂ≠óÊØç*/
+ (BOOL)checkPassword:(NSString *) password
{
    NSString *pattern = @"^(?![0-9]+$)(?![a-zA-Z]+$)[a-zA-Z0-9]{6,20}";
    NSPredicate *pred = [NSPredicate predicateWithFormat:@"SELF MATCHES%@",pattern];
    BOOL isMatch = [pred evaluateWithObject:password];
    return isMatch;
    
}


/**99+Â≠óÁ¨¶‰∏≤*/
+ (NSString *)numberString:(NSString *)numberString{
    if (App_IsEmpty(numberString)||
        [numberString intValue] == 0) {
        return nil;
    }
    else{
        if ([numberString integerValue]>99) {
            numberString = @"99+";
        }
        return [NSString stringWithFormat:@"%@",numberString];
    }
}


/**Âà§Êñ≠ÊòØÂê¶‰∏∫Á©∫*/
+ (BOOL)isBlankString:(NSString *)string {
    if (string == nil || string == NULL) {
        return YES;
    }
    if ([string isKindOfClass:[NSNull class]]) {
        return YES;
    }
    if ([[string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]] length]==0) {
        return YES;
    }
    return NO;
}
/**Ëé∑ÂèñUUID*/
+ (NSString*)generateUuidString {
    CFUUIDRef uuid_ref = CFUUIDCreate(NULL);
    CFStringRef uuid_string_ref= CFUUIDCreateString(NULL, uuid_ref);
    
    CFRelease(uuid_ref);
    NSString *uuid = [NSString stringWithString:(__bridge NSString*)uuid_string_ref];
    
    CFRelease(uuid_string_ref);
    return uuid;
}
/**Ëé∑ÂèñÈ´òÂ∫¶*/
+ (CGFloat)getAttributeSizeHeight:(NSAttributedString *)attr Width:(CGFloat)width {
    NSStringDrawingOptions options = NSStringDrawingUsesLineFragmentOrigin | NSStringDrawingUsesFontLeading;
    CGSize size = [attr boundingRectWithSize:CGSizeMake(width, CGFLOAT_MAX) options:options context:nil].size;
    return ceilf(size.height);
}
/**Â≠óÁ¨¶‰∏≤È´òÂ∫¶*/
+ (CGFloat)getTextSizeHeight:(NSString*)text UIFont:(UIFont *)font Width:(CGFloat)width lineBreakMode:(NSLineBreakMode)lineBreakMode {
    NSMutableParagraphStyle *paragraph = [[NSMutableParagraphStyle alloc] init];
    paragraph.alignment = NSTextAlignmentLeft;
    paragraph.lineBreakMode = lineBreakMode;
    //    paragraph.lineSpacing = kTextLineSpace;
    
    NSDictionary *attributeDic = @{NSFontAttributeName: font, NSParagraphStyleAttributeName: paragraph};
    NSStringDrawingOptions options = NSStringDrawingUsesLineFragmentOrigin | NSStringDrawingUsesFontLeading;
    
    CGSize size = [text boundingRectWithSize:CGSizeMake(width, CGFLOAT_MAX) options:options attributes:attributeDic context:nil].size;
    return ceilf(size.height);
}
/**Ëé∑ÂèñÂ≠óÁ¨¶‰∏≤È´òÂ∫¶*/
+ (CGFloat)getTextSizeWidth:(NSString *)text UIFont:(NSInteger)font  Height:(CGFloat)height {
    NSMutableParagraphStyle *paragraph = [[NSMutableParagraphStyle alloc] init];
    paragraph.alignment = NSTextAlignmentLeft;
    paragraph.lineBreakMode = NSLineBreakByCharWrapping;
    paragraph.lineSpacing = kTextLineSpace;
    
    NSDictionary *attributeDic = @{NSFontAttributeName: [UIFont systemFontOfSize:font], NSParagraphStyleAttributeName: paragraph};
    NSStringDrawingOptions options = NSStringDrawingUsesLineFragmentOrigin | NSStringDrawingUsesFontLeading;
    CGSize size = [text boundingRectWithSize:CGSizeMake(0, height) options:options attributes:attributeDic context:nil].size;
    return ceilf(size.width);
}

/**Âêé7ËÑ±Êïè*/
+ (NSString *)securePhone:(NSString *)phone{
    NSString *str = [phone substringFromIndex:7];
    return [@"*******" stringByAppendingString:str];
}

/**ÂØåÊñáÊú¨*/
+ (NSMutableAttributedString *)attributeWithString:(NSString *)string font:(UIFont *)font foregroundColor:(UIColor *)color {
    NSMutableParagraphStyle *paragraphStyle = [[NSMutableParagraphStyle alloc] init];
    paragraphStyle.alignment = NSTextAlignmentLeft;
    paragraphStyle.lineBreakMode = NSLineBreakByCharWrapping;
    paragraphStyle.lineSpacing = kTextLineSpace;
    
    NSDictionary *attributes = @{ NSParagraphStyleAttributeName:paragraphStyle, NSForegroundColorAttributeName: color, NSFontAttributeName: font};
    NSMutableAttributedString *attributeStr = [[NSMutableAttributedString alloc] initWithString:string attributes:attributes];
    
    return attributeStr;
}

/**Ëé∑ÂèñÊòüÊúü*/
+ (NSString *)dateWeekWithDateString:(NSString *)dateString
{
    NSTimeInterval time=[dateString doubleValue];
    NSDate *date=[NSDate dateWithTimeIntervalSince1970:time];
    NSCalendar *gregorian = [[NSCalendar alloc]
                             initWithCalendarIdentifier:NSCalendarIdentifierGregorian];
    NSDateComponents *weekdayComponents =
    [gregorian components:NSCalendarUnitWeekday fromDate:date];
    NSInteger _weekday = [weekdayComponents weekday];
    NSString *weekStr;
    if (_weekday == 1) {
        weekStr = @"ÊòüÊúüÊó•";
    }else if (_weekday == 2){
        weekStr = @"ÊòüÊúü‰∏Ä";
    }else if (_weekday == 3){
        weekStr = @"ÊòüÊúü‰∫å";
    }else if (_weekday == 4){
        weekStr = @"ÊòüÊúü‰∏â";
    }else if (_weekday == 5){
        weekStr = @"ÊòüÊúüÂõõ";
    }else if (_weekday == 6){
        weekStr = @"ÊòüÊúü‰∫î";
    }else if (_weekday == 7){
        weekStr = @"ÊòüÊúüÂÖ≠";
    }
    return weekStr;
}

//Âà§Êñ≠ÊòØÂê¶ËæìÂÖ•‰∫Üemoji Ë°®ÊÉÖ

+ (BOOL)stringContainsEmoji:(NSString *)string{
    
    __block BOOL returnValue = NO;
    
    
    
    [string enumerateSubstringsInRange:NSMakeRange(0, [string length])
     
                               options:NSStringEnumerationByComposedCharacterSequences
     
                            usingBlock:^(NSString *substring, NSRange substringRange, NSRange enclosingRange, BOOL *stop) {
                                
                                const unichar hs = [substring characterAtIndex:0];
                                
                                if (0xd800 <= hs && hs <= 0xdbff) {
                                    
                                    if (substring.length > 1) {
                                        
                                        const unichar ls = [substring characterAtIndex:1];
                                        
                                        const int uc = ((hs - 0xd800) * 0x400) + (ls - 0xdc00) + 0x10000;
                                        
                                        if (0x1d000 <= uc && uc <= 0x1f77f) {
                                            
                                            returnValue = YES;
                                            
                                        }
                                        
                                    }
                                    
                                } else if (substring.length > 1) {
                                    
                                    const unichar ls = [substring characterAtIndex:1];
                                    
                                    if (ls == 0x20e3) {
                                        
                                        returnValue = YES;
                                        
                                    }
                                    
                                    
                                    
                                } else {
                                    
                                    if (0x2100 <= hs && hs <= 0x27ff) {
                                        //ÈîÆÁõò‰πü‰ºöËµ∞ËøôÈáå
                                        returnValue = NO;
                                        
                                    } else if (0x2B05 <= hs && hs <= 0x2b07) {
                                        
                                        returnValue = YES;
                                        
                                    } else if (0x2934 <= hs && hs <= 0x2935) {
                                        
                                        returnValue = YES;
                                        
                                    } else if (0x3297 <= hs && hs <= 0x3299) {
                                        
                                        returnValue = YES;
                                        
                                    } else if (hs == 0xa9 || hs == 0xae || hs == 0x303d || hs == 0x3030 || hs == 0x2b55 || hs == 0x2b1c || hs == 0x2b1b || hs == 0x2b50) {
                                        
                                        returnValue = YES;
                                        
                                    }else if (hs == 0x200d){
                                        
                                        returnValue = YES;
                                        
                                    }
                                    
                                }
                                
                            }];
    
    
    
    return returnValue;
    
}
//Âà§Êñ≠ÊòØÂê¶ËæìÂÖ•‰∫Üemoji Ë°®ÊÉÖ„ÄÇ
+ (BOOL)isEmoji:(NSString *)string
{
    if ([string length]<2)
    {
        return NO;
    }
    
    static NSCharacterSet *_variationSelectors;
    _variationSelectors = [NSCharacterSet characterSetWithRange:NSMakeRange(0xFE00, 16)];
    
    if ([string rangeOfCharacterFromSet: _variationSelectors].location != NSNotFound)
    {
        return YES;
    }
    const unichar high = [string characterAtIndex:0];
    // Surrogate pair (U+1D000-1F9FF)
    if (0xD800 <= high && high <= 0xDBFF)
    {
        const unichar low = [string characterAtIndex: 1];
        const int codepoint = ((high - 0xD800) * 0x400) + (low - 0xDC00) + 0x10000;
        BOOL enoji = (0x1D000 <= codepoint && codepoint <= 0x1F9FF);
        return enoji;
        // Not surrogate pair (U+2100-27BF)
    }
    else
    {
        BOOL enoji = (0x2100 <= high && high <= 0x27BF);
        return enoji;
    }
}

/**
 Âà§Êñ≠ÊòØÂê¶ÊòØ‰∏§‰ΩçÂ∞èÊï∞
 
 @param str Â≠óÁ¨¶‰∏≤
 @return yes/no
 */
+ (BOOL)checkDecimal:(NSString *)str
{
    NSString *regex = @"^[0-9]+(\\.[0-9]{1,2})?$";
    NSPredicate *pred = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", regex];
    
    if([pred evaluateWithObject: str])
    {
        return YES;
    }else{
        return NO;
    }
}

/**
 Êï¥Êï∞
 @param str Â≠óÁ¨¶‰∏≤
 @return yes/no
 */
+ (BOOL)checkInteger:(NSString *)str
{
    NSString *regex = @"^[1-9]\\d*$";
    NSPredicate *pred = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", regex];
    
    if([pred evaluateWithObject: str])
    {
        return YES;
    }else{
        return NO;
    }
}
/**
 Êï∞Â≠ó
 @param str Â≠óÁ¨¶‰∏≤
 @return yes/no
 */
+ (BOOL)checkNumber:(NSString *)str
{
    NSString *regex = @"^[0-9]\\d*$";
    NSPredicate *pred = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", regex];
    
    if([pred evaluateWithObject: str])
    {
        return YES;
    }else{
        return NO;
    }
}

/**Âõ∫ÂÆöÁîµËØùÔºåÂåÖÊã¨400ÁîµËØù*/
+ (BOOL)telHas:(NSString *)str{
//    ^(\(\d{3,4}\)|\d{3,4}-|\s)?\d{7,14}$
//    (^(0[0-9]{2,3}\-)?([2-9][0-9]{6,7})+(\-[0-9]{1,4})?$)|(^((\(\d{3}\))|(\d{3}\-))?(1[3578]\d{9})$)|(^(400)-(\d{3})-(\d{4})(.)(\d{1,4})$)|(^(400)-(\d{3})-(\d{4}$))
    NSString *regex = @"(^(0[0-9]{2,3}\\-)?([2-9][0-9]{6,7})+(\\-[0-9]{1,4})?$)|(^((\\(\\d{3}\\))|(\\d{3}\\-))?(1[3578]\\d{9})$)|(^(400)-(\\d{3})-(\\d{4})(.)(\\d{1,4})$)|(^(400)-(\\d{3})-(\\d{4}$))";
    NSPredicate *pred = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", regex];
    
    if([pred evaluateWithObject: str])
    {
        return YES;
    }else{
        return NO;
    }
}

/**ÊâãÊú∫Âè∑Âà§Êñ≠Ôºå11‰ΩçÂíåÁ¨¨‰∏Ä‰ΩçÊòØ1*/
+ (BOOL)telNumber:(NSString *)str {
    if (str.length != 11) {
        return NO;
    }
    NSString *firstStr = [str substringToIndex:1];
    if ([firstStr isEqualToString:@"1"] == YES) {
        return YES;
    }
    return NO;
    
}

///Âà†Èô§Á∫ø
+ (NSMutableAttributedString *)attributedString:(NSString *)string {
    if ([string isEqualToString:@"¬•"] || App_IsEmpty(string) || [string containsString:@"null"] || [string isEqualToString:@"¬•(null)"]) {
        return [[NSMutableAttributedString alloc]initWithString:@""];
    }
    NSMutableAttributedString *priceAttributed = [[NSMutableAttributedString alloc]initWithString:string];
    
    NSRange range = NSMakeRange(0, string.length);
    [priceAttributed addAttribute:NSStrikethroughStyleAttributeName value:@(1) range:range];
    [priceAttributed addAttribute:NSStrikethroughColorAttributeName value:[UIColor jk_colorWithHexString:(@"#999999")] range:range];
//    [priceAttributed addAttribute:NSFontAttributeName value:[UIFont systemFontOfSize:10] range:range];
    return priceAttributed;
}

///Ëá™Ëê•
+ (NSMutableAttributedString *)attributedSelfYingString:(NSString *)string {
    if (App_IsEmpty(string) || [string containsString:@"null"]|| [string isEqualToString:@"¬•(null)"]) {
        string =  @"";
        NSMutableAttributedString *priceAttributed = [[NSMutableAttributedString alloc]initWithString:string];
        return priceAttributed;
    }
    NSMutableAttributedString *attributedString = [[NSMutableAttributedString alloc] initWithString:string];

    NSTextAttachment *attchment = [[NSTextAttachment alloc]init];

    attchment.bounds = CGRectMake(0, -1, 28, 14);//ËÆæÁΩÆframe

    attchment.image = [UIImage imageNamed:@"ziying"];//ËÆæÁΩÆÂõæÁâá

        
    NSAttributedString *content = [NSAttributedString attributedStringWithAttachment:(NSTextAttachment *)(attchment)];

    [attributedString insertAttributedString:content atIndex:0];//ÊèíÂÖ•Âà∞Á¨¨Âá†‰∏™‰∏ãÊ†á

//    [attributedString appendAttributedString:content]; //Ê∑ªÂä†Âà∞Â∞æÈÉ®

    return attributedString;
}

///Ëá™Ëê•
+ (NSMutableAttributedString *)attributedSelfYingString:(NSString *)string top:(CGFloat)top {
    if (App_IsEmpty(string) || [string containsString:@"null"]|| [string isEqualToString:@"¬•(null)"]) {
        string =  @"";
        NSMutableAttributedString *priceAttributed = [[NSMutableAttributedString alloc]initWithString:string];
        return priceAttributed;
    }
    NSMutableAttributedString *attributedString = [[NSMutableAttributedString alloc] initWithString:string];

    NSTextAttachment *attchment = [[NSTextAttachment alloc]init];

    attchment.bounds = CGRectMake(0, top, 28, 14);//ËÆæÁΩÆframe

    attchment.image = [UIImage imageNamed:@"ziying"];//ËÆæÁΩÆÂõæÁâá

        
    NSAttributedString *content = [NSAttributedString attributedStringWithAttachment:(NSTextAttachment *)(attchment)];

    [attributedString insertAttributedString:content atIndex:0];//ÊèíÂÖ•Âà∞Á¨¨Âá†‰∏™‰∏ãÊ†á

//    [attributedString appendAttributedString:content]; //Ê∑ªÂä†Âà∞Â∞æÈÉ®

    return attributedString;
}


///Â§¥ÈÉ®ÊúâÁÇπ
+ (NSMutableAttributedString *)attributedSelfDotString:(NSString *)string top:(CGFloat)top {
    if (App_IsEmpty(string) || [string containsString:@"null"]|| [string isEqualToString:@"¬•(null)"]) {
        string =  @"";
        NSMutableAttributedString *priceAttributed = [[NSMutableAttributedString alloc]initWithString:string];
        return priceAttributed;
    }
    NSMutableAttributedString *attributedString = [[NSMutableAttributedString alloc] initWithString:string];

    NSTextAttachment *attchment = [[NSTextAttachment alloc]init];

    attchment.bounds = CGRectMake(0, top, 20, 20);//ËÆæÁΩÆframe

    attchment.image = [UIImage imageNamed:@"dot"];//ËÆæÁΩÆÂõæÁâá
        
    NSAttributedString *content = [NSAttributedString attributedStringWithAttachment:(NSTextAttachment *)(attchment)];

    [attributedString insertAttributedString:content atIndex:0];//ÊèíÂÖ•Âà∞Á¨¨Âá†‰∏™‰∏ãÊ†á

//    [attributedString appendAttributedString:content]; //Ê∑ªÂä†Âà∞Â∞æÈÉ®

    return attributedString;
}



///ËÆæÁΩÆÊåáÂÆö‰ΩçÁΩÆÂ≠ó‰ΩìÂíåÈ¢úËâ≤
+ (NSMutableAttributedString *)attributedFirstTextRedString:(NSString *)string withRange:(NSRange)range withTextColor:(UIColor *)textColor withFont:(UIFont *)font {
    if (App_IsEmpty(string) || [string containsString:@"null"]
        ||[string isEqualToString:@"¬•"] || [string isEqualToString:@"¬•(null)"]) {
        string =  @"";
        NSMutableAttributedString *priceAttributed = [[NSMutableAttributedString alloc]initWithString:string];
        return priceAttributed;
    }
    
    if (string.length < 1) {
        return nil;
    }
    NSMutableAttributedString *priceAttributed = [[NSMutableAttributedString alloc]initWithString:string];
    if (font != nil) {
        [priceAttributed addAttribute:NSFontAttributeName value:font range:range];
    }
    if (textColor != nil) {
        [priceAttributed addAttribute:NSForegroundColorAttributeName value:textColor range:range];
    }

    return priceAttributed;
}



///Â≠ó‰ΩìËÆæÁΩÆ
+ (NSMutableAttributedString *)attributedTextString:(NSString *)string withFirseRange:(NSRange)firstRange withFirstTextColor:(UIColor *)firstTextColor withFirstFont:(UIFont *)firstFont withTwoRange:(NSRange)Tworange withTwoColor:(UIColor *)twoColor withTwoFont:(UIFont *)twoFont {

    if (App_IsEmpty(string) || [string containsString:@"null"]
        ||[string isEqualToString:@"¬•"]|| [string isEqualToString:@"¬•(null)"]) {
        string =  @"";
        NSMutableAttributedString *priceAttributed = [[NSMutableAttributedString alloc]initWithString:string];
        return priceAttributed;
    }
    
    NSMutableAttributedString *priceAttributed = [[NSMutableAttributedString alloc]initWithString:string];
    
    [priceAttributed addAttribute:NSForegroundColorAttributeName value:firstTextColor range:firstRange];
    [priceAttributed addAttribute:NSFontAttributeName value:firstFont range:firstRange];
    
    [priceAttributed addAttribute:NSForegroundColorAttributeName value:twoColor range:Tworange];
    [priceAttributed addAttribute:NSFontAttributeName value:twoFont range:Tworange];

    return priceAttributed;
}


///ÊÆµËêΩËÆæÁΩÆ
+ (NSMutableAttributedString *)attributeTextStringParagraph:(NSString *)string {
    NSMutableAttributedString * attributedString = [[NSMutableAttributedString alloc]initWithString:string];
    
    NSMutableParagraphStyle *paragraphStyle = [[NSMutableParagraphStyle alloc]init];
    paragraphStyle.paragraphSpacingBefore = 0; // ÊÆµÈó¥Ë∑ù
    paragraphStyle.firstLineHeadIndent = 0;  // ÊÆµËêΩÁ¨¨‰∏ÄË°åÁº©Ëøõ
    paragraphStyle.lineSpacing = 10; // Ë°åÈó¥Ë∑ù
    paragraphStyle.headIndent = 0; // Â§¥Áº©Ëøõ
    paragraphStyle.lineBreakMode = NSLineBreakByWordWrapping;
    
    [attributedString addAttribute:NSParagraphStyleAttributeName value:paragraphStyle range:NSMakeRange(0, [string length])];
    
    [attributedString addAttribute:NSForegroundColorAttributeName value:[UIColor jk_colorWithHexString:(@"#333333")] range:NSMakeRange(0, string.length)];

    [attributedString addAttribute:NSFontAttributeName value:App_SystemFont(15) range:NSMakeRange(0, string.length)];
    
    return attributedString;

}


@end
